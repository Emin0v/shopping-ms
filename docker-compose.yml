version: '3.1'
services:
  mysql:
    image: mysql:5.5
    hostname: mysql
    environment:
      MYSQL_ROOT_PASSWORD: root
    ports:
      - 3335:3306

  msrabbitmq:
    image: rabbitmq:3-management
    ports:
      - '5672:5672'
      - '15672:15672'
    environment:
      - RABBITMQ_DEFAULT_USER=admin
      - RABBITMQ_DEFAULT_PASS=admin

  elasticsearch:
    image: elasticsearch:7.14.1
    ports:
      - 9201:9200
      - 9300:9300
    environment:
      discovery.type: single-node
    volumes:
      - esdata1:/usr/share/elasticsearch/data

  shopping-s3:
    image: minio/minio:RELEASE.2021-02-11T08-23-43Z
    ports:
      - 9000:9000
    environment:
      MINIO_ROOT_USER: shopping-minio
      MINIO_ROOT_PASSWORD: shopping-minio
    command: server /data


#  axonserver:
#    image: axoniq/axonserver
#    hostname: axonserver
#    volumes:
#      - axonserver-data:/data
#      - axonserver-events:/eventdata
#      - axonserver-config:/config:ro
#    ports:
#      - '8024:8024'
#      - '8124:8124'
#      - '8224:8224'
#    networks:
#      - axon-demo


volumes:
  shopping-ms_mysql_db_data:
  esdata1:
    driver: local
#  axonserver-data:
#  axonserver-events:
#  axonserver-config:


#networks:
#  axon-demo:
